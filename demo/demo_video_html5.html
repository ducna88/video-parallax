<!DOCTYPE html>
<html>
<head>
    <title>Video Parallax</title>
    <script src="lib/jquery-1.11.1.js"></script>
    <script>jQuery.noConflict();</script>
    <link rel="stylesheet" type="text/css" href="style2.css">
</head>
<body>
<div style="min-height: 1000px; background-color: olive"></div>
<div>
    <div class="container" style="position: relative">
        <div class="container-bg" style="">
            <div class="video-overlay"></div>
            <div class="content">
                <p> </p>
                <h1 style="text-align: center;">Hello every body</h1>
                <h1 style="text-align: center;">this is demo vimeo video parralax</h1>
                <h1 style="text-align: center;">My name Ducna :)</h1>
                <h1 style="text-align: center;"> </h1>
                <h1 style="text-align: center;"> </h1>
            </div>
            <div class="video-bg">
                <video id="video0" preload="auto" autoplay="autoplay" loop="loop" muted="muted"  controls>
                    <source src="http://joomlaextension.zoodemo.com/j3x/images/steven.mp4" type="video/mp4">
                    <source src="http://joomlaextension.zoodemo.com/j3x/images/steven.webm" type="video/webm">
                    Your browser does not support the video tag.
                </video>
            </div>

        </div>
    </div>
</div>
<div style="min-height: 1000px; background-color: olive"></div>
<script>

    //video parallax
    jQuery(document).ready(function(){

        /*
        New style parallax video - idea of Long
         */
        function checkElementOnWindow(element){
            var rect = element.getBoundingClientRect();
            return (rect.bottom > 0 && rect.bottom <= rect.height) ||
                    (rect.top > 0 && rect.top <= (window.innerHeight || document.documentElement.clientHeight));
        }
        function videoParallax(video) {

            var windowHeight = window.innerHeight || document.documentElement.clientHeight,
                    videoDemension = getDemensions(video),
                    containerDemension = getDemensions(video.parentNode.parentNode.parentNode),
                    maxScrollMove = windowHeight + containerDemension.height,
                    maxVideoMove = videoDemension.height - containerDemension.height,
                    ratioScroll = maxVideoMove/maxScrollMove,
                    topChange;


            videoDemension = getDemensions(video);
            var container = video.parentNode.parentNode.parentNode;
            containerDemension = getDemensions(container);
            maxVideoMove = videoDemension.height - containerDemension.height;
            ratioScroll = maxVideoMove/maxScrollMove;

            if(checkElementOnWindow(container)) {
                topChange = Math.floor((containerDemension.top - windowHeight) * ratioScroll);
                video.style.top = topChange+"px";

            }
        }

        var video = document.getElementById("video0");
                function getDemensions(video) {
            var rect = video.getBoundingClientRect();
            return rect;
        }

        videoParallax(video);
        jQuery(window).scroll(function(){
            videoParallax(video);
        });
        /*
        var windowHeight = window.innerHeight || document.documentElement.clientHeight,
                containerRect = this.container.getBoundingClientRect(),
                elementDimensions = elm.getDimensions(),
                maxWindowScroll = windowHeight + containerRect.height,
                maxElementScroll = elementDimensions.height - containerRect.height,
                scrollRatio = maxElementScroll / maxWindowScroll,
                amount = Math.floor((containerRect.top - windowHeight) * scrollRatio);
                */
        /*
        end new style
         */
        /*
        function parallax(top) {
            //vi tri scroll
            var scrollTop = jQuery(window).scrollTop();





            var change_value = window_height + height_wrap;
            var n = Math.abs(top/change_value) ;
            var scrollToCenter;
            var change_top;

            if(top <0) {
                if (scroll_to_video>0) {
                    //ngay o tren dau
                    //scrollToCeter la khoang cach scroll toi giua wrap
                    scrollToCenter = 0.5 * height_wrap;

                    if(scrollTop >= scrollToCenter) {
                        change_top =  -1 *(scrollTop - scrollToCenter);
                        if(change_top>= top) {
                            video_tag.css("top",top - change_top);

                        }
                    }

                } else {
                    scroll_to_video = scroll_to_video * -1;
                    scrollToCenter = scroll_to_video + 0.5 * height_wrap;
                    if((scrollTop >= scroll_to_video) && (scrollTop >= scrollToCenter)) {
                        change_top =  -1 *(scrollTop - scrollToCenter);
                        if(change_top>= top*2) {
                            video_tag.css("top",change_top);
                        }
                    }
                }

            } else {
            }
        }
*/


    });


</script>
</body>
</html>