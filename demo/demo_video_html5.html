<!DOCTYPE html>
<html>
<head>
    <title>Video Parallax</title>
    <script src="lib/jquery-1.11.1.js"></script>
    <script>jQuery.noConflict();</script>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div style="min-height: 1000px; background-color: olive"></div>
<div>
    <div class="wrap-video" style="position: relative">
        <div class="video-bg" style="">
            <div class="video-overlay"></div>
            <div class="content">
                <p> </p>
                <h1 style="text-align: center;">Hello every body</h1>
                <h1 style="text-align: center;">this is demo vimeo video parralax</h1>
                <h1 style="text-align: center;">My name Ducna :)</h1>
                <h1 style="text-align: center;"> </h1>
                <h1 style="text-align: center;"> </h1>
            </div>
            <div class="vid-bg">
                <video id="video0" preload="auto" autoplay="autoplay" loop="loop" muted="muted"  controls>
                    <source src="http://joomlaextension.zoodemo.com/j3x/images/steven.mp4" type="video/mp4">
                    <source src="http://joomlaextension.zoodemo.com/j3x/images/steven.webm" type="video/webm">
                    Your browser does not support the video tag.
                </video>
            </div>

        </div>
    </div>
</div>
<div style="min-height: 1000px; background-color: olive"></div>
<script>

    //video parallax
    jQuery(document).ready(function(){
        var ratio = 1;        //ratio video with div parent; eg: 1 = 100%, 1.5 = 150%...
        var wrap = jQuery('.wrap-video');
        var width_wrap = parseInt(wrap.css("width"));
        var height_wrap = parseInt(wrap.css("height"));
        var width_video = width_wrap * ratio;
        var height_video = width_video * 0.56;
        var left =(width_wrap - width_video)/2;

        //chieu cao man hinh web browse
        var window_height = jQuery(window).height();
        //div wrap cach top
        var wrap_offset_top = jQuery(wrap).offset().top;
        //khoang cach de scroll toi video
        var  scroll_to_video = window_height - wrap_offset_top;


        var video_tag = wrap.find("video");
        video_tag.css("max-height",height_video);
        video_tag.css("width",width_video);
        video_tag.css("max-width",width_video);

        var top = -1 * (height_video - height_wrap)/2 ;
        video_tag.css("top",top);
        video_tag.css("left",left);

        jQuery(window).scroll(function(){
            parallax(top);
        });

        function parallax(top) {
            //vi tri scroll
            var scrollTop = jQuery(window).scrollTop();





            var change_value = window_height + height_wrap;
            var n = Math.abs(top/change_value) ;
            var scrollToCenter;
            var change_top;

            if(top <0) {
                if (scroll_to_video>0) {
                    //ngay o tren dau
                    //scrollToCeter la khoang cach scroll toi giua wrap
                    scrollToCenter = 0.5 * height_wrap;

                    if(scrollTop >= scrollToCenter) {
                        change_top =  -1 *(scrollTop - scrollToCenter);
                        if(change_top>= top) {
                            video_tag.css("top",top - change_top);

                        }
                    }

                } else {
                    scroll_to_video = scroll_to_video * -1;
                    scrollToCenter = scroll_to_video + 0.5 * height_wrap;
                    if((scrollTop >= scroll_to_video) && (scrollTop >= scrollToCenter)) {
                        change_top =  -1 *(scrollTop - scrollToCenter);
                        if(change_top>= top*2) {
                            video_tag.css("top",change_top);
                        }
                    }
                }

            } else {
            }
        }



    });


</script>
</body>
</html>